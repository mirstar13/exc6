<!DOCTYPE html>
<html>
<head>
    <title>SSE Test</title>
</head>
<body>
    <h1>SSE Connection Test</h1>
    <div id="status">Connecting...</div>
    <div id="messages"></div>

    <script>
        const eventSource = new EventSource('/sse/test');
        
        eventSource.onopen = function() {
            document.getElementById('status').textContent = 'Connected!';
            console.log('SSE connection opened');
        };
        
        eventSource.addEventListener('connected', function(e) {
            console.log('Connected event:', e.data);
            document.getElementById('messages').innerHTML += '<p>Connected: ' + e.data + '</p>';
        });
        
        eventSource.addEventListener('message', function(e) {
            console.log('Message event:', e.data);
            document.getElementById('messages').innerHTML += '<p>Message: ' + e.data + '</p>';
        });
        
        eventSource.addEventListener('ping', function(e) {
            console.log('Ping event:', e.data);
        });
        
        eventSource.onerror = function(e) {
            console.error('SSE error:', e);
            document.getElementById('status').textContent = 'Error! Check console';
        };
    </script>
</body>
</html>
